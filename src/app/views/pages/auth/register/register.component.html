<div class="app-login__body">

  <div class="app-login__form">
    <div class="app-login__title">
      <h3>Neu registrieren</h3>
    </div>

    <app-auth-notice></app-auth-notice>

    <ng-container *ngIf="application$ | async as application">

      <ng-container *ngIf="application?.registration?.isEnabled">
        <form *ngIf="showForm" class="app-login__form app-form" [formGroup]="registerForm" autocomplete="off"
          (submit)="onSubmit()">

          <div class="form-group">
            <mat-form-field>
              <mat-label>Vorname</mat-label>
              <input matInput type="text" placeholder="Vorname" formControlName="firstName" />
              <mat-error *ngIf="isControlHasError('firstName','required')">
                <strong>erforderlich</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('firstName','minLength')">
                <strong>Mindestlänge 3 Zeichen</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('firstName','maxLength')">
                <strong>Maximal 100 Zeichen</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field>
              <mat-label>Nachname</mat-label>
              <input matInput type="text" placeholder="Nachname" formControlName="lastName" />
              <mat-error *ngIf="isControlHasError('lastName','required')">
                <strong>erforderlich</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('lastName','minLength')">
                <strong>Mindestlänge 3 Zeichen</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('lastName','maxLength')">
                <strong>Maximal 100 Zeichen</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field>
              <mat-label>Email</mat-label>
              <input matInput type="email" placeholder="Email" formControlName="email" autocomplete="off" />
              <mat-error *ngIf="isControlHasError('email','required')">
                <strong>erforderlich</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('email','email')">
                <strong>Keine gültige Adresse</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('email','minLength')">
                <strong>Mindestlänge 3 Zeichen</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('email','maxLength')">
                <strong>Maximal 100 Zeichen</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field>
              <mat-label>Anzeigename</mat-label>
              <input matInput type="text" placeholder="Anzeigename" formControlName="displayName" />
              <mat-error *ngIf="isControlHasError('displayName','required')">
                <strong>erforderlich</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('displayName','minLength')">
                <strong>Mindestlänge 3 Zeichen</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('displayName','maxLength')">
                <strong>Maximal 100 Zeichen</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field>
              <mat-label>Passwort</mat-label>
              <input matInput type="password" placeholder="Passwort" formControlName="password" autocomplete="off" />
              <mat-error *ngIf="isControlHasError('password','required')">
                <strong>erforderlich</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('password','minLength')">
                <strong>Mindestlänge 3 Zeichen</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('password','maxLength')">
                <strong>Maximal 100 Zeichen</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field>
              <mat-label>Passwort wiederholen</mat-label>
              <input matInput type="password" placeholder="Passwort wiederholen" formControlName="confirmPassword"
                autocomplete="off" />
              <mat-error *ngIf="isControlHasError('confirmPassword','required')">
                <strong>erforderlich</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('confirmPassword','minLength')">
                <strong>Mindestlänge 3 Zeichen</strong>
              </mat-error>
              <mat-error *ngIf="isControlHasError('confirmPassword','maxLength')">
                <strong>Maximal 100 Zeichen</strong>
              </mat-error>
              <mat-error
                *ngIf="registerForm.get('confirmPassword')?.errors && registerForm.get('confirmPassword')?.errors?.confirmPassword">
                <strong>Die Passwörter stimmen nicht überein </strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-group" *ngIf="privacy$ | async as privacy">
            <mat-checkbox name="agree" formControlName="agree" (click)="resetAuthMessage()">
              Ich stimme den
              <a style="cursor: pointer;" (click)="showArticle(privacy)" class="app-link">Nutzungsbedigungen zu
              </a>
            </mat-checkbox>
          </div>

          <!--begin::Action-->
          <div class="app-login__actions">
            <a [routerLink]="['/auth/forgot-password']" class="app-link app-login__link-forgot" style="color: #090909">
              Passwort vergessen
            </a>
            <button type="button" [routerLink]="['/auth/login']" [disabled]="(isLoading$ | async) === true"
              id="app_login_signup_cancel" class="btn btn-secondary btn-elevate app-login__btn-secondary">Zurück zur
              Anmeldung</button>
            <button type="submit" formtarget="form" id="app_login_signin_submit"
              class="btn btn-primary btn-elevate app-login__btn-primary" formtarget="form"
              [ngClass]="{'app-spinner app-spinner--right app-spinner--md app-spinner--light': (isLoading$ | async) === true}">
              Registrieren!
            </button>
          </div>
        </form>
      </ng-container>
      <!--end::Action-->
    </ng-container>

  </div>
</div>
